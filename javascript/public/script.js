const puzzleData = {
    "grid": [[" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "a", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "l", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "g", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "o", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "r", " ", "e", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "c", "l", "i", "e", "n", "t", " ", " "], [" ", " ", " ", " ", "n", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "o", " ", "t", " ", "c", " ", " ", " "], [" ", " ", " ", " ", "e", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "d", " ", "h", " ", "r", " ", " ", " "], [" ", " ", "s", " ", "t", " ", " ", " ", "l", "o", "o", "p", " ", " ", " ", " ", " ", "e", " ", "m", " ", "y", " ", " ", " "], [" ", " ", "e", " ", "w", " ", " ", " ", " ", "b", " ", "y", " ", " ", " ", " ", " ", " ", " ", " ", " ", "p", " ", " ", " "], [" ", " ", "r", " ", "o", " ", "d", " ", " ", "j", " ", "t", " ", " ", " ", " ", " ", " ", " ", " ", " ", "t", " ", " ", " "], [" ", " ", "v", "a", "r", "i", "a", "b", "l", "e", " ", "h", " ", " ", " ", " ", " ", " ", " ", " ", " ", "i", " ", " ", " "], [" ", " ", "e", " ", "k", " ", "t", " ", " ", "c", " ", "o", " ", " ", " ", "f", "r", "a", "m", "e", "w", "o", "r", "k", " "], [" ", " ", "r", " ", " ", " ", "a", " ", " ", "t", " ", "n", " ", " ", " ", "u", " ", " ", " ", " ", " ", "n", " ", " ", " "], [" ", " ", " ", " ", " ", " ", "b", " ", " ", " ", " ", " ", " ", " ", " ", "n", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", "d", "a", "t", "a", "b", "a", "s", "e", " ", " ", "c", "u", "r", "s", "o", "r", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", "s", " ", " ", " ", "p", " ", " ", " ", " ", "t", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", "g", "a", "m", "e", " ", " ", " ", "i", "n", "h", "e", "r", "i", "t", "a", "n", "c", "e", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", "o", " ", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", "d", "e", "b", "u", "g", "g", "i", "n", "g", " ", " ", " ", " ", " ", " ", " ", " "], [" ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " "]], "words": [{"word": "object", "clue": "A software bundle of variables and related methods", "row": 12, "col": 9, "direction": "down"}, {"word": "variable", "clue": "A storage location paired with an associated symbolic name", "row": 15, "col": 2, "direction": "across"}, {"word": "database", "clue": "An organized collection of data stored and accessed electronically", "row": 14, "col": 6, "direction": "down"}, {"word": "database", "clue": "A structured collection of data", "row": 19, "col": 5, "direction": "across"}, {"word": "api", "clue": "A set of functions and procedures for building software", "row": 19, "col": 10, "direction": "down"}, {"word": "network", "clue": "A group of interconnected computers", "row": 10, "col": 4, "direction": "down"}, {"word": "inheritance", "clue": "A mechanism of basing an object or class upon another", "row": 21, "col": 10, "direction": "across"}, {"word": "loop", "clue": "A sequence of instructions that is continually repeated", "row": 12, "col": 8, "direction": "across"}, {"word": "game", "clue": "An activity for fun", "row": 21, "col": 3, "direction": "across"}, {"word": "function", "clue": "A block of organized, reusable code", "row": 16, "col": 15, "direction": "down"}, {"word": "framework", "clue": "A platform for developing software applications", "row": 16, "col": 15, "direction": "across"}, {"word": "cursor", "clue": "A text editor", "row": 19, "col": 15, "direction": "across"}, {"word": "debugging", "clue": "The process of identifying and removing errors from software", "row": 23, "col": 8, "direction": "across"}, {"word": "encryption", "clue": "The process of encoding information", "row": 8, "col": 21, "direction": "down"}, {"word": "server", "clue": "A computer program or device that provides functionality for other programs or devices", "row": 12, "col": 2, "direction": "down"}, {"word": "client", "clue": "A piece of computer hardware or software that accesses a service made available by a server", "row": 9, "col": 17, "direction": "across"}, {"word": "code", "clue": "Instructions for a computer", "row": 9, "col": 17, "direction": "down"}, {"word": "python", "clue": "A programming language", "row": 12, "col": 11, "direction": "down"}, {"word": "algorithm", "clue": "A step-by-step procedure for solving a problem", "row": 4, "col": 19, "direction": "down"}]
};

const gridContainer = document.getElementById('grid-container');
const cluesList = document.getElementById('clues-list');

function createGrid() {
    puzzleData.grid.forEach((row, rowIndex) => {
        row.forEach((cell, colIndex) => {
            const cellElement = document.createElement('div');
            cellElement.classList.add('cell');

            if (cell !== ' ') {
                const input = document.createElement('input');
                input.type = 'text';
                input.maxLength = 1;
                input.dataset.row = rowIndex;
                input.dataset.col = colIndex;
                cellElement.appendChild(input);
            } else {
                cellElement.style.backgroundColor = '#000';
            }

            gridContainer.appendChild(cellElement);
        });
    });
}

function addClues() {
    puzzleData.words.forEach((word, index) => {
        const clueElement = document.createElement('div');
        clueElement.classList.add('clue');
        clueElement.textContent = `${index + 1}. ${word.clue}`;
        cluesList.appendChild(clueElement);

        const cellElement = gridContainer.children[word.row * 25 + word.col];
        const cellNumber = document.createElement('span');
        cellNumber.classList.add('cell-number');
        cellNumber.textContent = index + 1;
        cellElement.appendChild(cellNumber);
    });
}

function checkWord(word) {
    const { row, col, direction } = word;
    let correct = true;

    for (let i = 0; i < word.word.length; i++) {
        const currentRow = direction === 'across' ? row : row + i;
        const currentCol = direction === 'across' ? col + i : col;
        const input = gridContainer.children[currentRow * 25 + currentCol].querySelector('input');

        if (input.value.toLowerCase() !== word.word[i].toLowerCase()) {
            correct = false;
            break;
        }
    }

    return correct;
}

function checkPuzzle() {
    let allCorrect = true;

    puzzleData.words.forEach((word) => {
        if (!checkWord(word)) {
            allCorrect = false;
        }
    });

    if (allCorrect) {
        alert('Congratulations! You solved the crossword puzzle!');
    }
}

createGrid();
addClues();

// Create a button to check the puzzle
const checkButton = document.createElement('button');
checkButton.textContent = 'Check Puzzle';
checkButton.id = 'check-button';
document.getElementById('game-container').appendChild(checkButton);

// Add event listener to the button
checkButton.addEventListener('click', () => {
    checkPuzzle();
    highlightIncorrectWords();
});

// Function to highlight incorrect words
function highlightIncorrectWords() {
    puzzleData.words.forEach((word) => {
        const { row, col, direction } = word;
        let isCorrect = true;
        const cells = [];

        for (let i = 0; i < word.word.length; i++) {
            const currentRow = direction === 'across' ? row : row + i;
            const currentCol = direction === 'across' ? col + i : col;
            const cell = gridContainer.children[currentRow * 25 + currentCol];
            const input = cell.querySelector('input');

            if (input.value.toLowerCase() !== word.word[i].toLowerCase()) {
                isCorrect = false;
            }
            cells.push(cell);
        }

        cells.forEach(cell => {
            const input = cell.querySelector('input');
            input.style.backgroundColor = isCorrect ? '' : 'red';
        });
    });
}

// Convert input to uppercase
gridContainer.addEventListener('input', (e) => {
    if (e.target.tagName === 'INPUT') {
        e.target.value = e.target.value.toUpperCase();
    }
});

// Add event listener for keydown events on the grid container
gridContainer.addEventListener('keydown', handleKeyDown);

function handleKeyDown(event) {
    if (event.target.tagName !== 'INPUT') return;

    const currentRow = parseInt(event.target.dataset.row);
    const currentCol = parseInt(event.target.dataset.col);

    switch (event.key) {
        case 'ArrowUp':
            moveFocus(currentRow - 1, currentCol);
            break;
        case 'ArrowDown':
            moveFocus(currentRow + 1, currentCol);
            break;
        case 'ArrowLeft':
            moveFocus(currentRow, currentCol - 1);
            break;
        case 'ArrowRight':
            moveFocus(currentRow, currentCol + 1);
            break;
    }
}

function moveFocus(row, col) {
    const nextCell = gridContainer.children[row * 25 + col];
    if (nextCell) {
        const input = nextCell.querySelector('input');
        if (input) {
            input.focus();
        }
    }
}